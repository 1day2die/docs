(self.webpackChunkcontrolpanel=self.webpackChunkcontrolpanel||[]).push([[633],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),m=r,h=c["".concat(l,".").concat(m)]||c[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8579:function(e,t,n){"use strict";n.r(t),n.d(t,{contentTitle:function(){return m},default:function(){return f},frontMatter:function(){return c},metadata:function(){return h},toc:function(){return k}});var a=n(2122),r=n(9756),o=n(7294),i=n(3905),s=n(6010),l="tableOfContentsInline_3fWc";function d(e){var t=e.toc,n=e.isChild;return t.length?o.createElement("ul",{className:n?"":"table-of-contents"},t.map((function(e){return o.createElement("li",{key:e.id},o.createElement("a",{href:"#"+e.id,dangerouslySetInnerHTML:{__html:e.value}}),o.createElement(d,{isChild:!0,toc:e.children}))}))):null}var p=function(e){var t=e.toc;return o.createElement("div",{className:(0,s.Z)(l)},o.createElement(d,{toc:t}))},u=["components"],c={sidebar_position:1},m="Getting started",h={unversionedId:"Installation/getting-started",id:"Installation/getting-started",isDocsHomePage:!1,title:"Getting started",description:"It is recommended that you have some sort of Linux experience and MariaDB experience before installing this",source:"@site/docs/Installation/getting-started.md",sourceDirName:"Installation",slug:"/Installation/getting-started",permalink:"/docs/Installation/getting-started",editUrl:"https://github.com/ControlPanel-gg/docs/docs/Installation/getting-started.md",version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/docs/intro"},next:{title:"Webserver",permalink:"/docs/Installation/webserver"}},k=[{value:"Dependencies",id:"dependencies",children:[{value:"Example Dependency Installation",id:"example-dependency-installation",children:[]},{value:"Extra dependency used on this dashboard",id:"extra-dependency-used-on-this-dashboard",children:[]},{value:"Installing Composer",id:"installing-composer",children:[]}]},{value:"Download Files",id:"download-files",children:[]},{value:"Installation",id:"installation",children:[{value:"Database Setup",id:"database-setup",children:[]},{value:"Environment Configuration",id:"environment-configuration",children:[]},{value:"Add some example products",id:"add-some-example-products",children:[]},{value:"Add The First User",id:"add-the-first-user",children:[]},{value:"Set Permissions",id:"set-permissions",children:[]}]},{value:"Queue Listeners",id:"queue-listeners",children:[{value:"Crontab Configuration",id:"crontab-configuration",children:[]},{value:"Create Queue Worker",id:"create-queue-worker",children:[]},{value:"Discord Auth",id:"discord-auth",children:[]}]}],g={toc:k};function f(e){var t=e.components,n=(0,r.Z)(e,u);return(0,i.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"getting-started"},"Getting started"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It is recommended that you have some sort of Linux experience and MariaDB experience before installing this"))),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Warning, The dashboard is currently in pre-release and may contain some bugs. Use This dashboard at your own risk."))),(0,i.kt)(p,{toc:k,mdxType:"TOCInline"}),(0,i.kt)("h2",{id:"dependencies"},"Dependencies"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"PHP ",(0,i.kt)("inlineCode",{parentName:"li"},"7.4")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"8.0")," (recommended) with the following extensions: ",(0,i.kt)("inlineCode",{parentName:"li"},"cli"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"openssl"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"gd"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"mysql"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"PDO"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"mbstring"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"tokenizer"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bcmath"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"xml")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"dom"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"curl"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"zip"),", and ",(0,i.kt)("inlineCode",{parentName:"li"},"fpm")," if you are planning to use NGINX."),(0,i.kt)("li",{parentName:"ul"},"MySQL ",(0,i.kt)("inlineCode",{parentName:"li"},"5.7.22")," or higher (MySQL ",(0,i.kt)("inlineCode",{parentName:"li"},"8")," recommended) ",(0,i.kt)("strong",{parentName:"li"},"or")," MariaDB ",(0,i.kt)("inlineCode",{parentName:"li"},"10.2")," or higher."),(0,i.kt)("li",{parentName:"ul"},"Redis (",(0,i.kt)("inlineCode",{parentName:"li"},"redis-server"),")"),(0,i.kt)("li",{parentName:"ul"},"A webserver (Apache, NGINX, Caddy, etc.)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"curl")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"tar")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"unzip")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"git")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"composer")," v2")),(0,i.kt)("h3",{id:"example-dependency-installation"},"Example Dependency Installation"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"if you already have pterodactyl installed you can skip this step!")),(0,i.kt)("p",null,"The commands below are simply an example of how you might install these dependencies. Please consult with your\noperating system's package manager to determine the correct packages to install."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'# Add "add-apt-repository" command\napt -y install software-properties-common curl apt-transport-https ca-certificates gnupg\n\n# Add additional repositories for PHP, Redis, and MariaDB\nLC_ALL=C.UTF-8 add-apt-repository -y ppa:ondrej/php\nadd-apt-repository -y ppa:chris-lea/redis-server\ncurl -sS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | sudo bash\n\n# Update repositories list\napt update\n\n# Add universe repository if you are on Ubuntu 18.04\napt-add-repository universe\n\n# Install Dependencies\napt -y install php8.0 php8.0-{cli,gd,mysql,pdo,mbstring,tokenizer,bcmath,xml,fpm,curl,zip} mariadb-server nginx tar unzip git redis-server\n')),(0,i.kt)("h3",{id:"extra-dependency-used-on-this-dashboard"},"Extra dependency used on this dashboard"),(0,i.kt)("p",null,"you need to install this, use the appropriate php version (php -v)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get install php8.0-intl\n")),(0,i.kt)("h3",{id:"installing-composer"},"Installing Composer"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"if you already have pterodactyl installed you can skip this step!")),(0,i.kt)("p",null,"Composer is a dependency manager for PHP that allows us to ship everything you'll need code wise to operate the Panel. You'll\nneed composer installed before continuing in this process."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer\n")),(0,i.kt)("h2",{id:"download-files"},"Download Files"),(0,i.kt)("p",null,"The first step in this process is to create the folder where the panel will live and then move ourselves into that\nnewly created folder. Below is an example of how to perform this operation."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p /var/www/dashboard\ncd /var/www/dashboard\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/ControlPanel-gg/dashboard.git ./\nchmod -R 755 storage/* bootstrap/cache/\n")),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("p",null,"Now that all of the files have been downloaded we need to configure some core aspects of the Panel."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"You will need a database setup and a database user with the correct permissions created for that database before"),"\n",(0,i.kt)("strong",{parentName:"p"},"continuing any further.")),(0,i.kt)("p",null,"First, we will copy over our default environment settings file, install core dependencies, and then generate a\nnew application encryption key."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cp .env.example .env\ncomposer install --no-dev --optimize-autoloader\n\n# Only run the command below if you are installing this Panel for the first time\nphp artisan key:generate --force\n\n\n# you should create a symbolic link from public/storage to storage/app/public\nphp artisan storage:link\n")),(0,i.kt)("p",null,"Back up your encryption key (APP_KEY in the ",(0,i.kt)("inlineCode",{parentName:"p"},".env")," file). It is used as an encryption key for all data that needs to be stored securely (e.g. api keys).\nStore it somewhere safe - not just on your server. If you lose it all encrypted data is irrecoverable -- even if you have database backups."),(0,i.kt)("h3",{id:"database-setup"},"Database Setup"),(0,i.kt)("p",null,"To make a database and database user, you can follow this guide.\nThis is for MariaDB. Please change the USE_YOUR_OWN_PASSWORD part to your password. Also, 127.0.0.1 is for localhost. Please have basic knowledge of Linux before attempting this. Use at your own responsibility."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mysql -u root -p\nCREATE DATABASE dashboard;\nCREATE USER 'dashboarduser'@'127.0.0.1' IDENTIFIED BY 'USE_YOUR_OWN_PASSWORD';\nGRANT ALL PRIVILEGES ON *.* TO 'dashboarduser'@'127.0.0.1' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\n")),(0,i.kt)("h3",{id:"environment-configuration"},"Environment Configuration"),(0,i.kt)("p",null,"Edit the .env to your needs"),(0,i.kt)("p",null,"Please ",(0,i.kt)("strong",{parentName:"p"},"do not")," forget to enter the database crediantials in here, or the next step won't work\nPlease ",(0,i.kt)("strong",{parentName:"p"},"do not")," forget to enter your pterodactyl API key in here, or the next steps won't work"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"nano .env\n")),(0,i.kt)("p",null,"We need to set up all of the base data for the Panel in the database you created earlier. ",(0,i.kt)("strong",{parentName:"p"},"The command below\nmay take some time to run depending on your machine. Please ",(0,i.kt)("em",{parentName:"strong"},"DO NOT")," exit the process until it is completed!")," This\ncommand will set up the database tables and add all configuration options and default items."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan migrate --seed --force\n")),(0,i.kt)("h3",{id:"add-some-example-products"},"Add some example products"),(0,i.kt)("p",null,"This step is optional, only run this once"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan db:seed --class=ExampleItemsSeeder --force\n")),(0,i.kt)("h3",{id:"add-the-first-user"},"Add The First User"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan make:user\n")),(0,i.kt)("h3",{id:"set-permissions"},"Set Permissions"),(0,i.kt)("p",null,"The last step in the installation process is to set the correct permissions on the Panel files so that the webserver can\nuse them correctly."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# If using NGINX or Apache (not on CentOS):\nchown -R www-data:www-data /var/www/dashboard/*\n\n# If using NGINX on CentOS:\nchown -R nginx:nginx /var/www/dashboard/*\n\n# If using Apache on CentOS\nchown -R apache:apache /var/www/dashboard/*\n")),(0,i.kt)("h2",{id:"queue-listeners"},"Queue Listeners"),(0,i.kt)("h3",{id:"crontab-configuration"},"Crontab Configuration"),(0,i.kt)("p",null,"The first thing we need to do is create a new cron job that runs every minute to process specific Dashboard tasks. like billing users hourly and suspending unpaid servers. to open de crontab run: ",(0,i.kt)("inlineCode",{parentName:"p"},"crontab -e")," and paste the following configuration into to crontab"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"* * * * * php /var/www/dashboard/artisan schedule:run >> /dev/null 2>&1\n")),(0,i.kt)("h3",{id:"create-queue-worker"},"Create Queue Worker"),(0,i.kt)("p",null,"Next you need to create a new systemd worker to keep our queue process running in the background. This queue is responsible for sending emails and handling many other background tasks for the Dashboard."),(0,i.kt)("p",null,"Create a file called ",(0,i.kt)("inlineCode",{parentName:"p"},"dashboard.service")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/systemd/system")," with the contents below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Dashboard Queue Worker File\n# ----------------------------------\n\n[Unit]\nDescription=Dashboard Queue Worker\n\n[Service]\n# On some systems the user and group might be different.\n# Some systems use `apache` or `nginx` as the user and group.\nUser=www-data\nGroup=www-data\nRestart=always\nExecStart=/usr/bin/php /var/www/dashboard/artisan queue:work --sleep=3 --tries=3\n\n[Install]\nWantedBy=multi-user.target\n")),(0,i.kt)("p",null,"Finally, enable the service and set it to boot on machine start."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl enable --now dashboard.service\n")),(0,i.kt)("h3",{id:"discord-auth"},"Discord Auth"),(0,i.kt)("p",null,"Edit the .env file and look for discord related options :) make sure to fill out the desired options correctly."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Setting up auth"),(0,i.kt)("br",null),"\n",(0,i.kt)("a",{parentName:"p",href:"http://faq.demostoreprestashop.com/faq.php?fid=133&pid=41"},"How")," to get CLIENT_ID and CLIENT_SECRET ",(0,i.kt)("br",null),"\nfor the redirect uri you have to use YOUR_WEBSITE_URI + /auth/callback (example: ",(0,i.kt)("a",{parentName:"p",href:"https://bitsec.dev/auth/callback"},"https://bitsec.dev/auth/callback"),")"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Adding the discord bot"),(0,i.kt)("br",null),"\nif you would like to automatically force new users into your discord server after they have verified, you will need to set up a discord bot. This can be an already existing discord bot in your server."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"add your discord bot to your server and give him the appropriate permissions."),(0,i.kt)("li",{parentName:"ol"},"add your discord bot token to the .env file."),(0,i.kt)("li",{parentName:"ol"},"add your discord server(guild) ID to the .env file.")),(0,i.kt)("p",null,"That's it! The dashboard can now use your bot to make API calls to discord to place new users into your discord server. your bot will not come online as we only use it to make API calls when some 1 verifies, you can still use your bot as your normally would :)"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Custom role reward"),(0,i.kt)("br",null),"\nIf you would like to give your users a custom role automatically when they verify their discord account, you have to copy the ID of an existing role from your discord server and place it in the .env as well."))}f.isMDXComponent=!0},6010:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);